<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gas Cloud – Stock</title>
<script src="https://telegram.org/js/telegram-web-app.js?v=6"></script>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #000;
  color: #fff;
}

.back {
  position: fixed;
  top: 14px;
  left: 14px;
  background: #1a1a1a;
  padding: 10px 14px;
  border-radius: 14px;
  cursor: pointer;
  z-index: 10;
}

.products {
  padding: 80px 16px 16px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
}

.product {
  background: #1a1a1a;
  border-radius: 18px;
  padding: 10px;
}

.media {
  aspect-ratio: 1/1;
  background: #000;
  border-radius: 14px;
  overflow: hidden;
}

.media img, .media video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.name {
  text-align: center;
  margin-top: 8px;
  font-weight: 700;
}
</style>
</head>

<body>

<div class="back" onclick="goBack()">⬅ BACK</div>
<div class="products" id="products"></div>

<script>
const tg = window.Telegram.WebApp;
tg.ready(); tg.expand();

tg.BackButton.show();
tg.BackButton.onClick(goBack);

const CATEGORY = "stock";

function goBack() {
  tg.BackButton.hide();
  window.location.href = "catalog.html";
}

fetch("products.json?v=" + Date.now())
  .then(r => r.json())
  .then(products => {
    const box = document.getElementById("products");
    products.filter(p => p.category === CATEGORY).forEach(p => {
      const el = document.createElement("div");
      el.className = "product";
      el.innerHTML = `
        <div class="media">
          ${p.mediaType === "video"
            ? `<video src="${p.mediaUrl}" muted></video>`
            : `<img src="${p.mediaUrl}">`}
        </div>
        <div class="name">${p.name} – €${p.price}</div>
      `;
      box.appendChild(el);
    });
  });
</script>

</body>
</html>




