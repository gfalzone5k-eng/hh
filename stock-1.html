<script>
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

tg.BackButton.show();
tg.BackButton.onClick(goBack);

/* ✅ CATEGORIA FISSA */
const CATEGORY = "stock1";

function goBack() {
  tg.BackButton.hide();
  window.location.href = "catalog.html";
}

fetch("products.json?v=" + Date.now())
  .then(r => r.json())
  .then(products => {
    const box = document.getElementById("products");

    products
      .filter(p => p.category === CATEGORY)
      .forEach(p => {
        const el = document.createElement("div");
        el.className = "product";
        el.innerHTML = `
          <div class="media">
            ${p.mediaType === "video"
              ? `<video src="${p.mediaUrl}" muted></video>`
              : `<img src="${p.mediaUrl}">`}
          </div>
          <div class="name">${p.name} – €${p.price}</div>
        `;
        box.appendChild(el);
      });
  });
</script>



