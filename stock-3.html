<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gas Cloud – Stock 3</title>

<!-- Telegram Mini App SDK -->
<script src="https://telegram.org/js/telegram-web-app.js?v=6"></script>

<style>
/* =========================
   BASE
   ========================= */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background: #000;
  color: #fff;
}

/* =========================
   BACK BUTTON
   ========================= */
.back {
  position: fixed;
  top: calc(12px + env(safe-area-inset-top));
  left: 12px;
  background: rgba(20,20,20,0.9);
  backdrop-filter: blur(10px);
  border-radius: 14px;
  padding: 10px 14px;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  z-index: 10;
}

/* =========================
   PRODUCTS GRID
   ========================= */
.products {
  padding: 70px 16px 20px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
}

/* =========================
   PRODUCT CARD
   ========================= */
.product {
  background: linear-gradient(180deg, #1a1a1a, #0c0c0c);
  border-radius: 18px;
  padding: 10px;
  cursor: pointer;
  border: 1px solid rgba(255,255,255,0.08);
}

/* =========================
   MEDIA BOX
   ========================= */
.media {
  width: 100%;
  aspect-ratio: 1 / 1;
  overflow: hidden;
  border-radius: 14px;
  background: #000;
}

.media img,
.media video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* =========================
   PRODUCT NAME
   ========================= */
.name {
  margin-top: 8px;
  text-align: center;
  font-size: 13px;
  font-weight: 700;
}
</style>
</head>

<body>

<!-- BACK -->
<div class="back" onclick="goBack()">⬅ BACK</div>

<!-- PRODUCTS -->
<div class="products" id="products"></div>

<script>
/* =========================
   TELEGRAM INIT
   ========================= */
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

/* BACK TELEGRAM */
tg.BackButton.show();
tg.BackButton.onClick(goBack);

/* =========================
   CONFIG
   ========================= */
const CATEGORY = "stock3";

/* =========================
   NAVIGATION
   ========================= */
function goBack() {
  tg.BackButton.hide();
  window.location.href = "catalog.html";
}

/* =========================
   LOAD PRODUCTS
   ========================= */
fetch("products.json?v=" + Date.now())
  .then(res => res.json())
  .then(products => {
    const container = document.getElementById("products");

    products
      .filter(p => p.category === CATEGORY)
      .forEach(p => {
        const card = document.createElement("div");
        card.className = "product";

        const media =
          p.mediaType === "video"
            ? `<video src="${p.mediaUrl}" muted playsinline></video>`
            : `<img src="${p.mediaUrl}" alt="${p.name}">`;

        card.innerHTML = `
          <div class="media">${media}</div>
          <div class="name">${p.name} – €${p.price}</div>
        `;

        container.appendChild(card);
      });
  });
</script>

</body>
</html>
